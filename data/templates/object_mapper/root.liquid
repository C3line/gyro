/* DO NOT EDIT | Generated by gyro */

import ObjectMapper

extension {{ entity.name }}: Mappable {

  // MARK: Initializers
  convenience init?(_ map: Map) {
    self.init()        
  }

  // MARK: Mappable
  func mapping(map: Map) {
    {%- for attribute in entity.attributes %}
      {% assign attributeKey = attribute.name -%}
      {%- if attribute.transformer.empty == false -%}
        {%- assign attributeKey = attribute.json_key_path -%}
      {%- endif -%}

      {%- case attribute.type -%}
        {%- when "date" -%}
          {%- assign transformer = "ISO8601DateTransform" -%}
          {%- if attribute.transformer.size > 0 -%}
            {%- assign transformer = attribute.transformer -%}
          {%- endif -%}
    self.{{ attribute.name }} <- (map["{{ attributeKey }}"], {{ transformer }}())
        {%- when "integer_16" or "integer_32" or "integer_64" or "float" or "double" or "boolean" -%}
         {%- if attribute.optional == true -%}
    self.{{ attribute.name }}.value <- map["{{ attributeKey }}"]
          {%- else -%}
    self.{{ attribute.name }} <- map["{{ attributeKey }}"]
          {%- endif -%}
        {%- else -%}
    self.{{ attribute.name }} <- map["{{ attributeKey }}"]
      {%- endcase -%}
    {%- endfor -%}

    {%- for relationship in entity.relationships %}
      {% assign relationKey = relationship.name -%}
      {%- if relationship.json_key_path.size > 0 -%}
        {%- assign relationKey = relationship.json_key_path -%}
      {%- endif -%}
      {%- if relationship.type == "to_many" -%}
    self.{{ relationship.name }} <- (map["{{ relationKey }}"], ListTransform<"{{ relationship.inverse_type }}">())
      {%- else -%}
    self.{{ relationship.name }} <- map["{{ relationKey }}"]
      {%- endif -%}
    {%- endfor %}
  }

}